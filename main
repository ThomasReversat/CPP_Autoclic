#include <iostream>
#include <chrono>
#include <windows.h> // SDK windows
#include <windowsx.h>
#include <string>
#include "Cycle.hpp"

using namespace std;
#define _WIN32_WINNT 0x0500
// definition des fonctions clics ici
void clic_ici(int x,int y)
{
    INPUT i[2];
    memset(i, 0, sizeof(i));
    i[0].type = i[1].type = INPUT_MOUSE;
    i[0].mi.dx = (65535. / (double)GetSystemMetrics(SM_CXSCREEN)) * x;
    i[0].mi.dy = (65535. / (double)GetSystemMetrics(SM_CYSCREEN)) * y;
    i[0].mi.dwFlags = MOUSEEVENTF_MOVE|MOUSEEVENTF_ABSOLUTE|MOUSEEVENTF_LEFTDOWN;
    i[1].mi.dwFlags = MOUSEEVENTF_LEFTUP;
    SendInput(2, i, sizeof(INPUT));
}

void enchainer_clic(int x,int y,int nb)
{
    for(int i=0;i<nb;i++) // suite de clics (de repetitions)
    {
        clic_ici(x,y); // on enchaine nb clics
    }
}

void clic_tache_duree_simple(int x, int y, std::string tache)
{
    /* realise un clique Ã  la position (x,y) pour une tache donnee */
    cout <<"Veuillez saisir une tache"<<endl;
    cin >>tache;
    clic_ici(x,y);
}
string renommerTache(string mot)
{
    /*renommer une tache t */
    string tache = mot;
    return tache;
}
void supprimerTache(string t)
{
    t.clear(); // supprime une tache t
}
string dupliquerTache(string t,int n)
{
    string tache = " ";
    for(int i=0;i<n;i++)/* n tours de boucles */
    {
        tache = tache +"\n"+t+"\n";
    }
    return tache;
}
string ajouterTache(string t)
{
    /* ajouter une tache t dans une autre tache  */
    string tache=" ";
    tache.append(t);
    return t;
}
template<
        class Rep, // nombre de ticks de type rep
        class Period = std::ratio<1> //periode de ticks rationelles au moment de la compilation
> class duration;


int main() {
    int var0;
    int tache(0);
    cout <<"Bonjour"<<endl;
    cout <<"Veuillez saisir un entier qui represente la liste des taches"<<endl;
    cin >> tache;
    switch (tache)
    {
        case 0 : cout << "Click Interval"<<endl; // tache 1
        cout <<"Souhaitez vous renommer la tache ?"<<endl;
        cout << "Souhaitez vous la supprimer ?"<<endl;
        cout <<"Souhaitez vous dupliquez la tache"<<endl;
        cout <<"Souhaitez vous ajoutez la tache"<<endl;
        cout <<"Veuillez saisir un entier entre 1 et 4"<<endl;
        cin >> var0;
        switch(var0)
        {
            case 0 :
                renommerTache("Click Interval");
                cout <<renommerTache("Click Interval")<<endl;
                break;
            case 1 :
                supprimerTache("Click Interval");
                break;
            case 2 :
                dupliquerTache("Click Interval",5);
                cout <<dupliquerTache("Click Interval",5)<<endl;
                break;
            case 3 :
                ajouterTache("Click Interval");
                break;
            default: cout <<"saisir un entier entre 0 et 3"<<endl;
        }
        break;
        case 1: cout <<"Click Options"<<endl; // tache 2

        break;
        case 2 : cout <<"Click Repeat"<<endl; // tache 3
        break;
        case 3 : cout <<"Cursor Position"<<endl; // tache 4
        break;
        case 4 : cout <<"Autre options"<<endl; // tache 5
        break;
        default : cout <<"saisir un chiffre entre 1 et 4"<<endl;

        


    }

   // enchainer_clic(10,3,10);
    /* =================================================================================
     *
     *
     *
     */

   // SetCursorPos(0,0); // placer le curseur n'importe ou sur l'ecran
  //  Sleep(5000);
 //   clic_tache_duree_simple(10,10,"click options");
    mouse_event(MOUSEEVENTF_LEFTDOWN, 10, 100, 0, 0); //simulation double clic gauche
Sleep(9000);
    mouse_event(MOUSEEVENTF_LEFTUP, 0, 0, 0, 0); // double clic droit
    return 0;
}

